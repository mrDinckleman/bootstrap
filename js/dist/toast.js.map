{"version":3,"file":"toast.js","sources":["../src/toast.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'toast'\n// const VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.toast'\nconst EVENT_KEY          = `.${DATA_KEY}`\n\nconst Event = {\n  CLICK_DISMISS : `click.dismiss${EVENT_KEY}`,\n  HIDE          : `hide${EVENT_KEY}`,\n  HIDDEN        : `hidden${EVENT_KEY}`,\n  SHOW          : `show${EVENT_KEY}`,\n  SHOWN         : `shown${EVENT_KEY}`\n}\n\nconst ClassName = {\n  FADE    : 'fade',\n  HIDE    : 'hide',\n  SHOW    : 'show',\n  SHOWING : 'showing'\n}\n\nconst DefaultType = {\n  animation : 'boolean',\n  autohide  : 'boolean',\n  delay     : 'number'\n}\n\nconst Default = {\n  animation : true,\n  autohide  : true,\n  delay     : 500\n}\n\nconst Selector = {\n  DATA_DISMISS : '[data-dismiss=\"toast\"]'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toast {\n  constructor(element, config) {\n    this._element = element\n    this._config  = this._getConfig(config)\n    this._timeout = null\n    this._setListeners()\n  }\n\n  // Getters\n\n  // static get VERSION() {\n  //   return VERSION\n  // }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get ClassName() {\n    return ClassName\n  }\n\n  static get Selector() {\n    return Selector\n  }\n\n  // Public\n\n  show() {\n    const showEvent = $.Event(this.constructor.Event.SHOW)\n\n    $(this._element).trigger(showEvent)\n    if (showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (this._config.animation) {\n      this._element.classList.add(this.constructor.ClassName.FADE)\n    }\n\n    const complete = () => {\n      this._element.classList.remove(this.constructor.ClassName.SHOWING)\n      this._element.classList.add(this.constructor.ClassName.SHOW)\n\n      $(this._element).trigger(this.constructor.Event.SHOWN)\n\n      if (this._config.autohide) {\n        this._timeout = setTimeout(() => {\n          this.hide()\n        }, this._config.delay)\n      }\n    }\n\n    this._element.classList.remove(this.constructor.ClassName.HIDE)\n    Util.reflow(this._element)\n    this._element.classList.add(this.constructor.ClassName.SHOWING)\n    if (this._config.animation) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n  }\n\n  hide() {\n    if (!this._element.classList.contains(this.constructor.ClassName.SHOW)) {\n      return\n    }\n\n    const hideEvent = $.Event(this.constructor.Event.HIDE)\n\n    $(this._element).trigger(hideEvent)\n    if (hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._close()\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n    this._timeout = null\n\n    if (this._element.classList.contains(this.constructor.ClassName.SHOW)) {\n      this._element.classList.remove(this.constructor.ClassName.SHOW)\n    }\n\n    $(this._element).off(this.constructor.Event.CLICK_DISMISS)\n\n    $.removeData(this._element, this.constructor.DATA_KEY)\n    this._element = null\n    this._config  = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    const dataAttributes = $(this._element).data()\n\n    config = {\n      ...this.constructor.Default,\n      ...dataAttributes,\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    Util.typeCheckConfig(\n      this.constructor.NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _setListeners() {\n    $(this._element).on(\n      this.constructor.Event.CLICK_DISMISS,\n      this.constructor.Selector.DATA_DISMISS,\n      () => this.hide()\n    )\n  }\n\n  _close() {\n    const complete = () => {\n      this._element.classList.add(this.constructor.ClassName.HIDE)\n      $(this._element).trigger(this.constructor.Event.HIDDEN)\n    }\n\n    this._element.classList.remove(this.constructor.ClassName.SHOW)\n    if (this._config.animation) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(Class) {\n    return function (config) {\n      return this.each(function () {\n        let data      = $(this).data(Class.DATA_KEY)\n        const _config = typeof config === 'object' && config\n\n        if (!data) {\n          data = new Class(this, _config)\n          $(this).data(Class.DATA_KEY, data)\n        }\n\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`)\n          }\n\n          data[config]()\n        }\n      })\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\nconst JQUERY_NO_CONFLICT = $.fn[Toast.NAME]\nconst plugin = Toast._jQueryInterface(Toast)\n\n$.fn[Toast.NAME]             = plugin\n$.fn[Toast.NAME].Constructor = Toast\n$.fn[Toast.NAME].noConflict  = () => {\n  $.fn[Toast.NAME] = JQUERY_NO_CONFLICT\n  return plugin\n}\n\nexport default Toast\n"],"names":["NAME","DATA_KEY","EVENT_KEY","Event","CLICK_DISMISS","HIDE","HIDDEN","SHOW","SHOWN","ClassName","FADE","SHOWING","DefaultType","animation","autohide","delay","Default","Selector","DATA_DISMISS","Toast","element","config","_element","_config","_getConfig","_timeout","_setListeners","show","showEvent","$","constructor","trigger","isDefaultPrevented","classList","add","complete","remove","setTimeout","hide","Util","reflow","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","emulateTransitionEnd","contains","hideEvent","_close","dispose","clearTimeout","off","removeData","dataAttributes","data","typeCheckConfig","on","_jQueryInterface","Class","each","TypeError","JQUERY_NO_CONFLICT","fn","plugin","Constructor","noConflict"],"mappings":"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"}