{"version":3,"file":"alert.js","sources":["../src/alert.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'alert'\n// const VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.alert'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\n\nconst Selector = {\n  DISMISS : '[data-dismiss=\"alert\"]'\n}\n\nconst Event = {\n  CLOSE          : `close${EVENT_KEY}`,\n  CLOSED         : `closed${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  ALERT : 'alert',\n  FADE  : 'fade',\n  SHOW  : 'show'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  // static get VERSION() {\n  //   return VERSION\n  // }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get ClassName() {\n    return ClassName\n  }\n\n  static get Selector() {\n    return Selector\n  }\n\n  // Public\n\n  close(element) {\n    let rootElement = this._element\n    if (element) {\n      rootElement = this._getRootElement(element)\n    }\n\n    const customEvent = this._triggerCloseEvent(rootElement)\n\n    if (customEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._removeElement(rootElement)\n  }\n\n  dispose() {\n    $.removeData(this._element, this.constructor.DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _getRootElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    let parent     = false\n\n    if (selector) {\n      parent = document.querySelector(selector)\n    }\n\n    if (!parent) {\n      parent = $(element).closest(`.${this.constructor.ClassName.ALERT}`)[0]\n    }\n\n    return parent\n  }\n\n  _triggerCloseEvent(element) {\n    const closeEvent = $.Event(this.constructor.Event.CLOSE)\n\n    $(element).trigger(closeEvent)\n    return closeEvent\n  }\n\n  _removeElement(element) {\n    $(element).removeClass(this.constructor.ClassName.SHOW)\n\n    if (!$(element).hasClass(this.constructor.ClassName.FADE)) {\n      this._destroyElement(element)\n      return\n    }\n\n    const transitionDuration = Util.getTransitionDurationFromElement(element)\n\n    $(element)\n      .one(Util.TRANSITION_END, (event) => this._destroyElement(element, event))\n      .emulateTransitionEnd(transitionDuration)\n  }\n\n  _destroyElement(element) {\n    $(element)\n      .detach()\n      .trigger(this.constructor.Event.CLOSED)\n      .remove()\n  }\n\n  // Static\n\n  static _jQueryInterface(Class) {\n    return function (config) {\n      return this.each(function () {\n        const $element = $(this)\n        let data = $element.data(Class.DATA_KEY)\n\n        if (!data) {\n          data = new Class(this)\n          $element.data(Class.DATA_KEY, data)\n        }\n\n        if (config === 'close') {\n          data[config](this)\n        }\n      })\n    }\n  }\n\n  static _handleDismiss(alertInstance) {\n    return function (event) {\n      if (event) {\n        event.preventDefault()\n      }\n\n      alertInstance.close(this)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(\n  Alert.Event.CLICK_DATA_API,\n  Alert.Selector.DISMISS,\n  Alert._handleDismiss(new Alert())\n)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\nconst JQUERY_NO_CONFLICT = $.fn[Alert.NAME]\nconst plugin = Alert._jQueryInterface(Alert)\n\n$.fn[Alert.NAME]             = plugin\n$.fn[Alert.NAME].Constructor = Alert\n$.fn[Alert.NAME].noConflict  = () => {\n  $.fn[Alert.NAME] = JQUERY_NO_CONFLICT\n  return plugin\n}\n\nexport default Alert\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","Selector","DISMISS","Event","CLOSE","CLOSED","CLICK_DATA_API","ClassName","ALERT","FADE","SHOW","Alert","element","_element","close","rootElement","_getRootElement","customEvent","_triggerCloseEvent","isDefaultPrevented","_removeElement","dispose","$","removeData","constructor","selector","Util","getSelectorFromElement","parent","document","querySelector","closest","closeEvent","trigger","removeClass","hasClass","_destroyElement","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","event","emulateTransitionEnd","detach","remove","_jQueryInterface","Class","config","each","$element","data","_handleDismiss","alertInstance","preventDefault","on","JQUERY_NO_CONFLICT","fn","plugin","Constructor","noConflict"],"mappings":"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"}