{"version":3,"file":"dropdown.js","sources":["../src/dropdown.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\nimport {\n  createPopper\n} from '@popperjs/core'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                     = 'dropdown'\n// const VERSION                  = '4.4.1'\nconst DATA_KEY                 = 'bs.dropdown'\nconst EVENT_KEY                = `.${DATA_KEY}`\nconst DATA_API_KEY             = '.data-api'\nconst ESCAPE_KEYCODE           = 27 // KeyboardEvent.which value for Escape (Esc) key\nconst SPACE_KEYCODE            = 32 // KeyboardEvent.which value for space key\nconst TAB_KEYCODE              = 9 // KeyboardEvent.which value for tab key\nconst ARROW_UP_KEYCODE         = 38 // KeyboardEvent.which value for up arrow key\nconst ARROW_DOWN_KEYCODE       = 40 // KeyboardEvent.which value for down arrow key\nconst RIGHT_MOUSE_BUTTON_WHICH = 3 // MouseEvent.which value for the right button (assuming a right-handed mouse)\nconst REGEXP_KEYDOWN           = new RegExp(`${ARROW_UP_KEYCODE}|${ARROW_DOWN_KEYCODE}|${ESCAPE_KEYCODE}`)\n\nconst Event = {\n  HIDE             : `hide${EVENT_KEY}`,\n  HIDDEN           : `hidden${EVENT_KEY}`,\n  SHOW             : `show${EVENT_KEY}`,\n  SHOWN            : `shown${EVENT_KEY}`,\n  CLICK            : `click${EVENT_KEY}`,\n  CLICK_DATA_API   : `click${EVENT_KEY}${DATA_API_KEY}`,\n  KEYDOWN_DATA_API : `keydown${EVENT_KEY}${DATA_API_KEY}`,\n  KEYUP_DATA_API   : `keyup${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  DISABLED        : 'disabled',\n  SHOW            : 'show',\n  DROPUP          : 'dropup',\n  DROPRIGHT       : 'dropright',\n  DROPLEFT        : 'dropleft',\n  MENURIGHT       : 'dropdown-menu-right'\n  // MENULEFT        : 'dropdown-menu-left',\n  // POSITION_STATIC : 'position-static'\n}\n\nconst Selector = {\n  DATA_TOGGLE   : '[data-toggle=\"dropdown\"]',\n  FORM_CHILD    : '.dropdown form',\n  MENU          : '.dropdown-menu',\n  // NAVBAR_NAV    : '.navbar-nav',\n  VISIBLE_ITEMS : '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n}\n\nconst AttachmentMap = {\n  TOP       : 'top-start',\n  TOPEND    : 'top-end',\n  BOTTOM    : 'bottom-start',\n  BOTTOMEND : 'bottom-end',\n  RIGHT     : 'right-start',\n  RIGHTEND  : 'right-end',\n  LEFT      : 'left-start',\n  LEFTEND   : 'left-end'\n}\n\nconst Default = {\n  offset       : [0, 0],\n  flip         : true,\n  // boundary     : 'scrollParent',\n  reference    : 'toggle',\n  display      : 'dynamic',\n  popperConfig : null\n}\n\nconst DefaultType = {\n  offset       : '(array|function)',\n  flip         : 'boolean',\n  // boundary     : '(string|element)',\n  reference    : '(string|element)',\n  display      : 'string',\n  popperConfig : '(null|object)'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Dropdown {\n  constructor(element, config) {\n    this._element  = element\n    this._popper   = null\n    this._config   = this._getConfig(config)\n    this._menu     = this._getMenuElement()\n    // this._inNavbar = this._detectNavbar()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n\n  // static get VERSION() {\n  //   return VERSION\n  // }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY\n  }\n\n  static get ClassName() {\n    return ClassName\n  }\n\n  static get Selector() {\n    return Selector\n  }\n\n  // Public\n\n  toggle() {\n    if (this._element.disabled || $(this._element).hasClass(this.constructor.ClassName.DISABLED)) {\n      return\n    }\n\n    const isActive = $(this._menu).hasClass(this.constructor.ClassName.SHOW)\n\n    this.constructor._clearMenus(this.constructor)({\n      target: this._element\n    })\n\n    if (isActive) {\n      return\n    }\n\n    this.show(true)\n  }\n\n  show(usePopper = false) {\n    if (this._element.disabled || $(this._element).hasClass(this.constructor.ClassName.DISABLED) || $(this._menu).hasClass(this.constructor.ClassName.SHOW)) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n    const showEvent = $.Event(this.constructor.Event.SHOW, relatedTarget)\n    const parent = Dropdown._getParentFromElement(this._element)\n\n    $(parent).trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    // Disable totally Popper.js for Dropdown in Navbar\n    if (/* !this._inNavbar && */usePopper) {\n      /**\n       * Check for Popper dependency\n       * Popper - https://popper.js.org\n       */\n      if (typeof createPopper === 'undefined') {\n        throw new TypeError('Bootstrap\\'s dropdowns require Popper.js (https://popper.js.org/)')\n      }\n\n      let referenceElement = this._element\n\n      if (this._config.reference === 'parent') {\n        referenceElement = parent\n      } else if (Util.isElement(this._config.reference)) {\n        referenceElement = this._config.reference\n\n        // Check if it's jQuery element\n        if (typeof this._config.reference.jquery !== 'undefined') {\n          referenceElement = this._config.reference[0]\n        }\n      }\n\n      // If boundary is not `scrollParent`, then set position to `static`\n      // to allow the menu to \"escape\" the scroll parent's boundaries\n      // https://github.com/twbs/bootstrap/issues/24251\n      // if (this._config.boundary !== 'scrollParent') {\n      //   $(parent).addClass(this.constructor.ClassName.POSITION_STATIC)\n      // }\n      this._popper = createPopper(referenceElement, this._menu, this._getPopperConfig())\n    }\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement/* &&\n        $(parent).closest(this.constructor.Selector.NAVBAR_NAV).length === 0*/) {\n      $(document.body).children().on('mouseover', null, $.noop)\n    }\n\n    this._element.focus()\n    this._element.setAttribute('aria-expanded', true)\n\n    $(this._menu).toggleClass(this.constructor.ClassName.SHOW)\n    $(parent)\n      .toggleClass(this.constructor.ClassName.SHOW)\n      .trigger($.Event(this.constructor.Event.SHOWN, relatedTarget))\n  }\n\n  hide() {\n    if (this._element.disabled || $(this._element).hasClass(this.constructor.ClassName.DISABLED) || !$(this._menu).hasClass(this.constructor.ClassName.SHOW)) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n    const hideEvent = $.Event(this.constructor.Event.HIDE, relatedTarget)\n    const parent = Dropdown._getParentFromElement(this._element)\n\n    $(parent).trigger(hideEvent)\n\n    if (hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    $(this._menu).toggleClass(this.constructor.ClassName.SHOW)\n    $(parent)\n      .toggleClass(this.constructor.ClassName.SHOW)\n      .trigger($.Event(this.constructor.Event.HIDDEN, relatedTarget))\n  }\n\n  dispose() {\n    $.removeData(this._element, this.constructor.DATA_KEY)\n    $(this._element).off(this.constructor.EVENT_KEY)\n    this._element = null\n    this._config  = null\n    this._menu = null\n    if (this._popper !== null) {\n      this._popper.destroy()\n      this._popper = null\n    }\n  }\n\n  update() {\n    // this._inNavbar = this._detectNavbar()\n    if (this._popper !== null) {\n      this._popper.update()\n    }\n  }\n\n  // Private\n\n  _addEventListeners() {\n    $(this._element).on(this.constructor.Event.CLICK, (event) => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.toggle()\n    })\n  }\n\n  _getConfig(config) {\n    const dataAttributes = $(this._element).data()\n\n    config = {\n      ...this.constructor.Default,\n      ...dataAttributes,\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    Util.typeCheckConfig(\n      this.constructor.NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _getMenuElement() {\n    if (!this._menu) {\n      const parent = Dropdown._getParentFromElement(this._element)\n\n      if (parent) {\n        this._menu = parent.querySelector(this.constructor.Selector.MENU)\n      }\n    }\n    return this._menu\n  }\n\n  _getPlacement() {\n    const $parentDropdown = $(this._element.parentNode)\n    let placement = AttachmentMap.BOTTOM\n\n    // Handle dropup\n    if ($parentDropdown.hasClass(this.constructor.ClassName.DROPUP)) {\n      placement = AttachmentMap.TOP\n      if ($(this._menu).hasClass(this.constructor.ClassName.MENURIGHT)) {\n        placement = AttachmentMap.TOPEND\n      }\n    } else if ($parentDropdown.hasClass(this.constructor.ClassName.DROPRIGHT)) {\n      placement = AttachmentMap.RIGHT\n    } else if ($parentDropdown.hasClass(this.constructor.ClassName.DROPLEFT)) {\n      placement = AttachmentMap.LEFT\n    } else if ($(this._menu).hasClass(this.constructor.ClassName.MENURIGHT)) {\n      placement = AttachmentMap.BOTTOMEND\n    }\n    return placement\n  }\n\n  // _detectNavbar() {\n  //   return $(this._element).closest('.navbar').length > 0\n  // }\n\n  // _getOffset() {\n  //   const offset = {}\n  //\n  //   if (typeof this._config.offset === 'function') {\n  //     offset.fn = (data) => {\n  //       data.offsets = {\n  //         ...data.offsets,\n  //         ...this._config.offset(data.offsets, this._element) || {}\n  //       }\n  //\n  //       return data\n  //     }\n  //   } else {\n  //     offset.offset = this._config.offset\n  //   }\n  //\n  //   return offset\n  // }\n\n  _getPopperConfig() {\n    const popperConfig = {\n      placement: this._getPlacement(),\n      modifiers: [\n        {\n          name: 'offset',\n          options: {\n            offset: this._config.offset\n          }\n        },\n        {\n          name: 'applyStyles',\n          enabled: this._config.display !== 'static'\n        },\n        {\n          name: 'preventOverflow',\n          options: {\n            tetherOffset: ({\n              reference, placement\n            }) => {\n              if (placement.indexOf('right') !== -1 || placement.indexOf('left') !== -1) {\n                return reference.height\n              }\n              return reference.width\n            }\n          }\n        }\n      ]\n      // modifiers: {\n      //   offset: this._getOffset(),\n      //   flip: {\n      //     enabled: this._config.flip\n      //   },\n      //   preventOverflow: {\n      //     boundariesElement: this._config.boundary\n      //   }\n      // }\n    }\n\n    // Disable Popper.js if we have a static display\n    // if (this._config.display === 'static') {\n    //   popperConfig.modifiers.applyStyle = {\n    //     enabled: false\n    //   }\n    // }\n\n    return {\n      ...popperConfig,\n      ...this._config.popperConfig\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(Class) {\n    return function (config) {\n      return this.each(function () {\n        let data = $(this).data(Class.DATA_KEY)\n        const _config = typeof config === 'object' && config\n\n        if (!data) {\n          data = new Class(this, _config)\n          $(this).data(Class.DATA_KEY, data)\n        }\n\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`)\n          }\n          data[config]()\n        }\n      })\n    }\n  }\n\n  static _clearMenus(Class) {\n    // eslint-disable-next-line complexity\n    return function (event) {\n      if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH ||\n        event.type === 'keyup' && event.which !== TAB_KEYCODE)) {\n        return\n      }\n\n      const toggles = [].slice.call(document.querySelectorAll(Class.Selector.DATA_TOGGLE))\n\n      for (let i = 0, len = toggles.length; i < len; i++) {\n        const parent = Class._getParentFromElement(toggles[i])\n        const context = $(toggles[i]).data(Class.DATA_KEY)\n        const relatedTarget = {\n          relatedTarget: toggles[i]\n        }\n\n        if (event && event.target !== toggles[i] && parent.contains(event.target)) {\n          continue\n        }\n\n        if (event && event.type === 'click') {\n          relatedTarget.clickEvent = event\n        }\n\n        if (!context) {\n          continue\n        }\n\n        const dropdownMenu = context._menu\n        if (!$(parent).hasClass(Class.ClassName.SHOW)) {\n          continue\n        }\n\n        if (event && (event.type === 'click' &&\n          /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) &&\n          $.contains(parent, event.target)) {\n          continue\n        }\n\n        const hideEvent = $.Event(Class.Event.HIDE, relatedTarget)\n        $(parent).trigger(hideEvent)\n        if (hideEvent.isDefaultPrevented()) {\n          continue\n        }\n\n        // If this is a touch-enabled device we remove the extra\n        // empty mouseover listeners we added for iOS support\n        if ('ontouchstart' in document.documentElement) {\n          $(document.body).children().off('mouseover', null, $.noop)\n        }\n\n        toggles[i].setAttribute('aria-expanded', 'false')\n\n        if (context._popper) {\n          context._popper.destroy()\n        }\n\n        $(dropdownMenu).removeClass(Class.ClassName.SHOW)\n        $(parent)\n          .removeClass(Class.ClassName.SHOW)\n          .trigger($.Event(Class.Event.HIDDEN, relatedTarget))\n      }\n    }\n  }\n\n  static _getParentFromElement(element) {\n    let parent\n    const selector = Util.getSelectorFromElement(element)\n\n    if (selector) {\n      parent = document.querySelector(selector)\n    }\n\n    return parent || element.parentNode\n  }\n\n  static _dataApiKeydownHandler(Class) {\n    // eslint-disable-next-line complexity\n    return function (event) {\n      // If not input/textarea:\n      //  - And not a key in REGEXP_KEYDOWN => not a dropdown command\n      // If input/textarea:\n      //  - If space key => not a dropdown command\n      //  - If key is other than escape\n      //    - If key is not up or down => not a dropdown command\n      //    - If trigger inside the menu => not a dropdown command\n      if (/input|textarea/i.test(event.target.tagName)\n        ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE &&\n        (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE ||\n          $(event.target).closest(Class.Selector.MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {\n        return\n      }\n\n      event.preventDefault()\n      event.stopPropagation()\n\n      if (this.disabled || $(this).hasClass(Class.ClassName.DISABLED)) {\n        return\n      }\n\n      const parent   = Dropdown._getParentFromElement(this)\n      const isActive = $(parent).hasClass(Class.ClassName.SHOW)\n\n      if (!isActive && event.which === ESCAPE_KEYCODE) {\n        return\n      }\n\n      if (!isActive || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {\n        if (event.which === ESCAPE_KEYCODE) {\n          const toggle = parent.querySelector(Class.Selector.DATA_TOGGLE)\n          $(toggle).trigger('focus')\n        }\n\n        $(this).trigger('click')\n        return\n      }\n\n      const items = [].slice.call(parent.querySelectorAll(Class.Selector.VISIBLE_ITEMS))\n        .filter((item) => $(item).is(':visible'))\n\n      if (items.length === 0) {\n        return\n      }\n\n      let index = items.indexOf(event.target)\n\n      if (event.which === ARROW_UP_KEYCODE && index > 0) { // Up\n        index--\n      }\n\n      if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) { // Down\n        index++\n      }\n\n      if (index < 0) {\n        index = 0\n      }\n\n      items[index].focus()\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Dropdown.Event.KEYDOWN_DATA_API, Dropdown.Selector.DATA_TOGGLE, Dropdown._dataApiKeydownHandler(Dropdown))\n  .on(Dropdown.Event.KEYDOWN_DATA_API, Dropdown.Selector.MENU, Dropdown._dataApiKeydownHandler(Dropdown))\n  .on(`${Dropdown.Event.CLICK_DATA_API} ${Dropdown.Event.KEYUP_DATA_API}`, Dropdown._clearMenus(Dropdown))\n  .on(Dropdown.Event.CLICK_DATA_API, Dropdown.Selector.DATA_TOGGLE, function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n    Dropdown._jQueryInterface(Dropdown).call($(this), 'toggle')\n  })\n  .on(Dropdown.Event.CLICK_DATA_API, Dropdown.Selector.FORM_CHILD, (e) => {\n    e.stopPropagation()\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\nconst JQUERY_NO_CONFLICT = $.fn[Dropdown.NAME]\nconst plugin = Dropdown._jQueryInterface(Dropdown)\n\n$.fn[Dropdown.NAME] = plugin\n$.fn[Dropdown.NAME].Constructor = Dropdown\n$.fn[Dropdown.NAME].noConflict = () => {\n  $.fn[Dropdown.NAME] = JQUERY_NO_CONFLICT\n  return plugin\n}\n\nexport default Dropdown\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ESCAPE_KEYCODE","SPACE_KEYCODE","TAB_KEYCODE","ARROW_UP_KEYCODE","ARROW_DOWN_KEYCODE","RIGHT_MOUSE_BUTTON_WHICH","REGEXP_KEYDOWN","RegExp","Event","HIDE","HIDDEN","SHOW","SHOWN","CLICK","CLICK_DATA_API","KEYDOWN_DATA_API","KEYUP_DATA_API","ClassName","DISABLED","DROPUP","DROPRIGHT","DROPLEFT","MENURIGHT","Selector","DATA_TOGGLE","FORM_CHILD","MENU","VISIBLE_ITEMS","AttachmentMap","TOP","TOPEND","BOTTOM","BOTTOMEND","RIGHT","RIGHTEND","LEFT","LEFTEND","Default","offset","flip","reference","display","popperConfig","DefaultType","Dropdown","element","config","_element","_popper","_config","_getConfig","_menu","_getMenuElement","_addEventListeners","toggle","disabled","$","hasClass","constructor","isActive","_clearMenus","target","show","usePopper","relatedTarget","showEvent","parent","_getParentFromElement","trigger","isDefaultPrevented","createPopper","TypeError","referenceElement","Util","isElement","jquery","_getPopperConfig","document","documentElement","body","children","on","noop","focus","setAttribute","toggleClass","hide","hideEvent","destroy","dispose","removeData","off","update","event","preventDefault","stopPropagation","dataAttributes","data","typeCheckConfig","querySelector","_getPlacement","$parentDropdown","parentNode","placement","modifiers","name","options","enabled","tetherOffset","indexOf","height","width","_jQueryInterface","Class","each","which","type","toggles","slice","call","querySelectorAll","i","len","length","context","contains","clickEvent","dropdownMenu","test","tagName","removeClass","selector","getSelectorFromElement","_dataApiKeydownHandler","closest","items","filter","item","is","index","e","JQUERY_NO_CONFLICT","fn","plugin","Constructor","noConflict"],"mappings":"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"}